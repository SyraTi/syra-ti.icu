<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"syra-ti.icu","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.12.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="SyraTi.ICU">
<meta property="og:url" content="https://syra-ti.icu/page/4/">
<meta property="og:site_name" content="SyraTi.ICU">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="白茶SyraTi">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://syra-ti.icu/page/4/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/4/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>SyraTi.ICU</title>
  




<canvas id="canvas" style=" position:fixed;background:transparent;bottom:0;z-index: 999;pointer-events: none"></canvas>
<script src="https://cubism.live2d.com/sdk-web/cubismcore/live2dcubismcore.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/dylanNew/live2d/webgl/Live2D/lib/live2d.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/pixi.js@5.3.6/dist/pixi.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/pixi-live2d-display/dist/index.min.js"></script>
<!-- 如果只需要 Cubism 4 -->
<script src="https://cdn.jsdelivr.net/npm/pixi-live2d-display/dist/cubism4.min.js"></script>

<script>
  async function main() {

    const app = new PIXI.Application({
      view: document.getElementById("canvas"),
      autoStart: true,
      width: 300,
      height: 300,
      transparent: true,
    });

    const model = await PIXI.live2d.Live2DModel.from('/assets/live2d/models/object_live2d_002_101.asset/object_live2d_002_101.asset.model3.json');
    model.scale.set(.2)
    app.stage.addChild(model);
    // document.getElementById('canvas').addEventListener('click', () => {
    //
    //   model.motion('motion');
    // })

    // 变换
    // model.x = 100;
    // model.y = 100;
    // model.rotation = Math.PI;
    // model.skew.x = Math.PI;
    // model.scale.set(2, 2);
    // model.anchor.set(0.5, 0.5);

    //
    // 交互
    // model.on('hit', hitAreas => {
    //   console.log(hitAreas);
    //   if (hitAreas.includes('body')) {
    //     model.motion('motion');
    //   }
    // });
  }
  main()
</script>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">SyraTi.ICU</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="白茶SyraTi"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">白茶SyraTi</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">41</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://syra-ti.icu/2017/11/09/%E4%BD%BF%E7%94%A8canvas%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="白茶SyraTi">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/11/09/%E4%BD%BF%E7%94%A8canvas%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9.html" class="post-title-link" itemprop="url">使用canvas实现图片压缩</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-11-09 10:10:05" itemprop="dateCreated datePublished" datetime="2017-11-09T10:10:05+08:00">2017-11-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-27 21:20:40" itemprop="dateModified" datetime="2022-01-27T21:20:40+08:00">2022-01-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="原文链接-https-segmentfault-com-a-1190000009308553"><a href="#原文链接-https-segmentfault-com-a-1190000009308553" class="headerlink" title="原文链接 https://segmentfault.com/a/1190000009308553"></a>原文链接 <a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000009308553">https://segmentfault.com/a/1190000009308553</a></h2><p>那，首先通过<code>URL.createObjectURL(file)</code>从file对象直接取得了图片的地址</p>
<p>前面就不详细说了，开始压缩咯 ( ´ ▽ &#96; )ﾉ</p>
<p>噢，有个注意点:</p>
<p>每次调用<code>createObjectURL</code>的时候，一个新的URL对象就被创建了，即使是同一个file对象，也会创建一个新对URL对象，所以，为了最佳性能和内存使用，当不再需要这个对象的时候要<code>URL.revokeObjectURL()</code>释放它。</p>
<p>开始压缩</p>
<p>创建一个<code>compressImage</code>函数，将之图片的地址url作参数传入：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">compressImage (url) &#123;</span><br><span class="line">	<span class="keyword">let</span> cvs = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>)</span><br><span class="line">	<span class="keyword">let</span> ctx = cvs.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line">	<span class="keyword">let</span> img = <span class="keyword">new</span> <span class="variable language_">window</span>.<span class="title class_">Image</span>()</span><br><span class="line">	img.<span class="property">src</span> = url</span><br><span class="line">	img.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">		cvs.<span class="property">width</span> = img.<span class="property">width</span></span><br><span class="line">		cvs.<span class="property">height</span> = img.<span class="property">height</span></span><br><span class="line">		<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">			ctx.<span class="title function_">drawImage</span>(img, <span class="number">0</span>, <span class="number">0</span>, cvs.<span class="property">width</span>, cvs.<span class="property">height</span>)</span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">newImageData</span> = cvs.<span class="title function_">toDataURL</span>(<span class="string">&#x27;image/jpeg&#x27;</span>, <span class="number">0.1</span>)</span><br><span class="line">	    &#125;, <span class="number">0</span>)</span><br><span class="line">	    <span class="variable language_">this</span>.<span class="property">showPreviewer</span> = <span class="literal">true</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里说说</p>
<p><code>canvas.toDataURL(type, encoderOptions)</code><br><code>HTMLCanvasElement.toDataURL()</code>方法接受两个参数，<code>type</code>和<code>encoderOptions</code></p>
<p><code>type</code>是可选的，图片格式，默认是 <code>image/png</code>，<code>encoderOptions</code>表示图片质量， 在<code>type</code>为<code>image/jpeg</code> 或 <code>image/webp</code>时可以从 0 到 1 的区间内选择图片的质量。如果超出取值范围，将会使用默认值 <code>0.92</code>。其他参数会被忽略。</p>
<p><code>toDataURL()</code>返回的是<code>base64</code>字符串，如果要转成2进制</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">convertToBinary (dataURI) &#123;</span><br><span class="line">	<span class="keyword">let</span> byteString = <span class="variable language_">window</span>.<span class="title function_">atob</span>(dataURI.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>])</span><br><span class="line">	<span class="keyword">let</span> ab = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(byteString.<span class="property">length</span>)</span><br><span class="line">	<span class="keyword">let</span> ia = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(ab)</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; byteString.<span class="property">length</span>; i++) &#123;</span><br><span class="line">		ia[i] = byteString.<span class="title function_">charCodeAt</span>(i)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">let</span> bb = <span class="keyword">new</span> <span class="variable language_">window</span>.<span class="title class_">Blob</span>([ ab ])</span><br><span class="line">	<span class="keyword">return</span> bb</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试结果：由iphone6所拍摄的图片上传，由平均1.9M左右压缩至170k</p>
<p><em>･゜ﾟ･</em>:.｡..｡.:<em>･’(<em>ﾟ▽ﾟ</em>)’･</em>:.｡. .｡.:<em>･゜ﾟ･</em></p>
<p>再见<br>5月5日发布</p>
<hr>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://syra-ti.icu/2017/11/07/%E5%85%B3%E4%BA%8Emui-Div%E6%A8%A1%E5%BC%8F%E9%80%89%E9%A1%B9%E5%8D%A1-JS%E4%B8%BB%E5%8A%A8%E8%A7%A6%E5%8F%91%E5%88%87%E6%8D%A2%E6%8C%87%E5%AE%9A%E9%80%89%E9%A1%B9%E5%8D%A1.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="白茶SyraTi">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/11/07/%E5%85%B3%E4%BA%8Emui-Div%E6%A8%A1%E5%BC%8F%E9%80%89%E9%A1%B9%E5%8D%A1-JS%E4%B8%BB%E5%8A%A8%E8%A7%A6%E5%8F%91%E5%88%87%E6%8D%A2%E6%8C%87%E5%AE%9A%E9%80%89%E9%A1%B9%E5%8D%A1.html" class="post-title-link" itemprop="url">关于mui Div模式选项卡 JS主动触发切换指定选项卡</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-11-07 23:20:22" itemprop="dateCreated datePublished" datetime="2017-11-07T23:20:22+08:00">2017-11-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-27 21:20:40" itemprop="dateModified" datetime="2022-01-27T21:20:40+08:00">2022-01-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="需要先触发touchstart事件（旧版本需要先触发mousedown事件）"><a href="#需要先触发touchstart事件（旧版本需要先触发mousedown事件）" class="headerlink" title="需要先触发touchstart事件（旧版本需要先触发mousedown事件）"></a>需要先触发touchstart事件（旧版本需要先触发mousedown事件）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mui.<span class="title function_">trigger</span>($(<span class="string">&#x27;.mui-tab-item&#x27;</span>).<span class="title function_">eq</span>(<span class="number">1</span>)[<span class="number">0</span>],<span class="string">&#x27;touchstart&#x27;</span>);</span><br><span class="line">mui.<span class="title function_">trigger</span>($(<span class="string">&#x27;.mui-tab-item&#x27;</span>).<span class="title function_">eq</span>(<span class="number">1</span>)[<span class="number">0</span>],<span class="string">&#x27;tap&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="源代码尚未研究-以上为解决方案"><a href="#源代码尚未研究-以上为解决方案" class="headerlink" title="源代码尚未研究 以上为解决方案"></a>源代码尚未研究 以上为解决方案</h3><h4 id="2018-3-30-PS-发现好像只要改一下mui-active就行了？（扶额）"><a href="#2018-3-30-PS-发现好像只要改一下mui-active就行了？（扶额）" class="headerlink" title="2018-3-30 PS: 发现好像只要改一下mui-active就行了？（扶额）"></a>2018-3-30 PS: 发现好像只要改一下mui-active就行了？（扶额）</h4><h4 id="2018-4-25-PS-最简单的方式是改变item和切换目标的mui-active"><a href="#2018-4-25-PS-最简单的方式是改变item和切换目标的mui-active" class="headerlink" title="2018-4-25 PS: 最简单的方式是改变item和切换目标的mui-active"></a>2018-4-25 PS: 最简单的方式是改变item和切换目标的mui-active</h4><hr>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://syra-ti.icu/2017/10/08/window-requestAnimFrame-%E4%BB%A5%E5%8F%8APolyfill.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="白茶SyraTi">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/10/08/window-requestAnimFrame-%E4%BB%A5%E5%8F%8APolyfill.html" class="post-title-link" itemprop="url">window.requestAnimFrame 以及Polyfill</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-10-08 20:56:24" itemprop="dateCreated datePublished" datetime="2017-10-08T20:56:24+08:00">2017-10-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-27 21:20:40" itemprop="dateModified" datetime="2022-01-27T21:20:40+08:00">2022-01-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="requestAnimationFrame"><a href="#requestAnimationFrame" class="headerlink" title="requestAnimationFrame"></a>requestAnimationFrame</h2><blockquote>
<p>requestAnimationFrame是浏览器用于定时循环操作的一个接口，类似于setTimeout，主要用途是按帧对网页进行重绘。</p>
</blockquote>
<blockquote>
<p>设置这个API的目的是为了让各种网页动画效果（DOM动画、Canvas动画、SVG动画、WebGL动画）能够有一个统一的刷新机制，从而节省系统资源，提高系统性能，改善视觉效果。代码中使用这个API，就是告诉浏览器希望执行一个动画，让浏览器在下一个动画帧安排一次网页重绘。</p>
</blockquote>
<blockquote>
<p>requestAnimationFrame的优势，在于充分利用显示器的刷新机制，比较节省系统资源。显示器有固定的刷新频率（60Hz或75Hz），也就是说，每秒最多只能重绘60次或75次，requestAnimationFrame的基本思想就是与这个刷新频率保持同步，利用这个刷新频率进行页面重绘。此外，使用这个API，一旦页面不处于浏览器的当前标签，就会自动停止刷新。这就节省了CPU、GPU和电力。</p>
</blockquote>
<blockquote>
<p>不过有一点需要注意，requestAnimationFrame是在主线程上完成。这意味着，如果主线程非常繁忙，requestAnimationFrame的动画效果会大打折扣。</p>
</blockquote>
<blockquote>
<p>requestAnimationFrame使用一个回调函数作为参数。这个回调函数会在浏览器重绘之前调用。</p>
</blockquote>
<pre><code>requestID = window.requestAnimationFrame(callback);
</code></pre>
<h2 id="Polyfill"><a href="#Polyfill" class="headerlink" title="Polyfill"></a>Polyfill</h2><blockquote>
<p>目前，高版本浏览器Firefox 23 &#x2F; IE 10 &#x2F; Chrome &#x2F; Safari）都支持这个方法。可以用下面的方法，检查浏览器是否支持这个API。如果不支持，则自行模拟部署该方法。</p>
</blockquote>
<pre><code>window.requestAnimFrame = (function()&#123;
  return  window.requestAnimationFrame       || 
          window.webkitRequestAnimationFrame || 
          window.mozRequestAnimationFrame    || 
          window.oRequestAnimationFrame      || 
          window.msRequestAnimationFrame     || 
          function( callback )&#123;
            window.setTimeout(callback, 1000 / 60);
          &#125;;
&#125;)();
</code></pre>
<blockquote>
<p>上面的代码按照1秒钟60次（大约每16.7毫秒一次），来模拟requestAnimationFrame。</p>
</blockquote>
<blockquote>
<p>使用requestAnimationFrame的时候，只需反复调用它即可。</p>
</blockquote>
<pre><code>function repeatOften() &#123;
    // Do whatever
    requestAnimationFrame(repeatOften);
&#125;

requestAnimationFrame(repeatOften);
</code></pre>
<blockquote>
<p>取消重绘可以用 cancelAnimationFrame。</p>
</blockquote>
<pre><code>window.cancelAnimationFrame(requestID);
</code></pre>
<hr>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://syra-ti.icu/2017/09/26/%E5%85%B3%E4%BA%8EAjax%E8%B7%A8%E5%9F%9F%E8%AE%BF%E9%97%AE-session%E4%B8%8D%E8%83%BD%E4%BF%9D%E5%AD%98%E6%88%96%E4%B9%8B%E5%90%8E%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AEsession%E5%8F%96%E5%80%BC%E4%B8%BA%E7%A9%BA%E7%AD%89%E9%97%AE%E9%A2%98.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="白茶SyraTi">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/09/26/%E5%85%B3%E4%BA%8EAjax%E8%B7%A8%E5%9F%9F%E8%AE%BF%E9%97%AE-session%E4%B8%8D%E8%83%BD%E4%BF%9D%E5%AD%98%E6%88%96%E4%B9%8B%E5%90%8E%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AEsession%E5%8F%96%E5%80%BC%E4%B8%BA%E7%A9%BA%E7%AD%89%E9%97%AE%E9%A2%98.html" class="post-title-link" itemprop="url">关于Ajax跨域访问 session不能保存或之后无法访问session取值为空等问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-09-27 00:27:35" itemprop="dateCreated datePublished" datetime="2017-09-27T00:27:35+08:00">2017-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-27 21:20:40" itemprop="dateModified" datetime="2022-01-27T21:20:40+08:00">2022-01-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="根据浏览器的保护规则，跨域的时候我们创建的sessionId是不会被浏览器保存下来的，这样，当我们在进行跨域访问的时候，我们的sessionId就不会被保存下来，也就是说，每一次的请求，服务器就会以为是一个新的人，而不是同一个人，为了解决这样的办法，下面这种方法可以解决这种跨域的办法。"><a href="#根据浏览器的保护规则，跨域的时候我们创建的sessionId是不会被浏览器保存下来的，这样，当我们在进行跨域访问的时候，我们的sessionId就不会被保存下来，也就是说，每一次的请求，服务器就会以为是一个新的人，而不是同一个人，为了解决这样的办法，下面这种方法可以解决这种跨域的办法。" class="headerlink" title="根据浏览器的保护规则，跨域的时候我们创建的sessionId是不会被浏览器保存下来的，这样，当我们在进行跨域访问的时候，我们的sessionId就不会被保存下来，也就是说，每一次的请求，服务器就会以为是一个新的人，而不是同一个人，为了解决这样的办法，下面这种方法可以解决这种跨域的办法。"></a>根据浏览器的保护规则，<strong>跨域的时候我们创建的sessionId是不会被浏览器保存下来的</strong>，这样，当我们在进行跨域访问的时候，我们的sessionId就不会被保存下来，也就是说，每一次的请求，服务器就会以为是一个新的人，而不是同一个人，为了解决这样的办法，下面这种方法可以解决这种跨域的办法。</h4><p>在ajax 请求要加配置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">	<span class="attr">url</span>:url,</span><br><span class="line">	<span class="comment">//加上 xhrFields及crossDomain</span></span><br><span class="line">	<span class="attr">xhrFields</span>: &#123;</span><br><span class="line">		<span class="comment">//允许带上凭据</span></span><br><span class="line">        <span class="attr">withCredentials</span>: <span class="literal">true</span></span><br><span class="line">	&#125;,</span><br><span class="line">       <span class="attr">crossDomain</span>: <span class="literal">true</span>,</span><br><span class="line">       <span class="comment">//以上</span></span><br><span class="line">	<span class="attr">success</span>:<span class="keyword">function</span>(<span class="params">result</span>)&#123;</span><br><span class="line">		<span class="title function_">alert</span>(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">error</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="关于-withCredentials"><a href="#关于-withCredentials" class="headerlink" title="关于 withCredentials"></a>关于 withCredentials</h3><blockquote>
<p><strong>withCredentials：</strong><br>默认情况下，跨源请求不提供凭据(cookie、HTTP认证及客户端SSL证明等)。通过将withCredentials属性设置为true，可以指定某个请求应该发送凭据。如果服务器接收带凭据的请求，会用下面的HTTP头部来响应。</p>
</blockquote>
<blockquote>
<p><em>“Access-Control-Allow-Credentials: true”</em></p>
</blockquote>
<blockquote>
<p>如果发送的是带凭据的请求，但服务器的相应中没有包含上面这个头部，那么浏览器就不会把相应交给JavaScript(于是，responseText中将是空字符串，status的值为0，而且会调用onerror()事件处理程序)。另外，服务器还可以在Preflight响应中发送这个HTTP头部，表示允许源发送带凭据的请求。</p>
</blockquote>
<blockquote>
<p>支持withCredentials属性的浏览器有Firefox 3.5+、Safari 4+和Chrome。IE10及更早版本都不支持。<br>同时</p>
</blockquote>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>在添加基本的允许跨域响应头之后<br>需要添加 Access-Allow-Credentials:true<br>另外由于谷歌的安全策略<br>当withCredentials 为 true 时<br>ResponseHeader中的 Access-Allow-Origin 不能使用通配符 ‘*’<br>否则会提示</p>
<blockquote>
<p>A wildcard ‘*’ cannot be used in the ‘Access-Control-Allow-Origin’ header when the credentials flag is true. Origin ‘<a target="_blank" rel="noopener" href="http://url&/#39;">http://url&#39;</a> is therefore not allowed access.</p>
</blockquote>
<p>其他浏览器待测试</p>
<hr>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://syra-ti.icu/2017/08/18/%E5%85%B3%E4%BA%8EajaxFileUpload%E9%80%A0%E6%88%90-input-type-file-change%E4%BA%8B%E4%BB%B6%E5%8F%AA%E8%83%BD%E8%A7%A6%E5%8F%91%E4%B8%80%E6%AC%A1%E7%9A%84%E9%97%AE%E9%A2%98.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="白茶SyraTi">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/08/18/%E5%85%B3%E4%BA%8EajaxFileUpload%E9%80%A0%E6%88%90-input-type-file-change%E4%BA%8B%E4%BB%B6%E5%8F%AA%E8%83%BD%E8%A7%A6%E5%8F%91%E4%B8%80%E6%AC%A1%E7%9A%84%E9%97%AE%E9%A2%98.html" class="post-title-link" itemprop="url">关于ajaxFileUpload造成 input[type=file] change事件只能触发一次的问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-08-18 13:26:09" itemprop="dateCreated datePublished" datetime="2017-08-18T13:26:09+08:00">2017-08-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-27 21:20:40" itemprop="dateModified" datetime="2022-01-27T21:20:40+08:00">2022-01-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h4 id="现在发现的问题"><a href="#现在发现的问题" class="headerlink" title="现在发现的问题"></a>现在发现的问题</h4><p>通过js绑定的<code>input[type=file]</code> <code>change</code>事件只能触发一次</p>
<h4 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h4><p>该问题并不是由change事件失效造成的，而是ajaxFileUpload插件造成的，它会把原来的file元素替换成新的file元素，所以之前绑定的change事件就失效了，需要重新绑定一下</p>
<p>除了重新绑定以外，如果是使用<code>$fileInput.trigger(&#39;click&#39;)</code> 方式，失效原因是<code>$fileInput</code>仍指向旧元素，替代方案分为以下两步</p>
<ol>
<li>首先将ajaxFileUpload源码中<code>$(oldElement).clone()</code>（有些版本中为<code>jQuery(oldElement).clone()</code>）改为<code>$(oldElement).clone(true)</code> 这样可以在复制元素的同时复制事件</li>
<li>将<code>$fileInput.trigger(&#39;click&#39;)</code> 改为 <code>$(&#39;#id&#39;).trigger(&#39;click&#39;)</code>对保证新元素进行trigger而不是旧元素</li>
</ol>
<p>如果你想要知道具体原因，请往下看</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ajaxFileUpload源码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="comment">// 原input[type=file] </span></span><br><span class="line"> <span class="keyword">var</span> oldElement = $(<span class="string">&#x27;#&#x27;</span> + fileElementId);</span><br><span class="line"> <span class="comment">// clone一份新元素 此处需要添加true为参数 即上文第一步所提到的 复制元素的同时复制事件</span></span><br><span class="line"> <span class="keyword">var</span> newElement = $(oldElement).<span class="title function_">clone</span>(<span class="literal">true</span>);</span><br><span class="line"> <span class="comment">// 修改旧元素的id</span></span><br><span class="line"> $(oldElement).<span class="title function_">attr</span>(<span class="string">&#x27;id&#x27;</span>, fileId);</span><br><span class="line"> <span class="comment">// 将新元素放在旧元素的位置</span></span><br><span class="line"> $(oldElement).<span class="title function_">before</span>(newElement);</span><br><span class="line"> <span class="comment">// 将旧元素移动到目标表单</span></span><br><span class="line"> $(oldElement).<span class="title function_">appendTo</span>(form);</span><br><span class="line"> <span class="comment">// 设置表单样式</span></span><br><span class="line"> $(form).<span class="title function_">css</span>(<span class="string">&#x27;position&#x27;</span>, <span class="string">&#x27;absolute&#x27;</span>);</span><br><span class="line"> $(form).<span class="title function_">css</span>(<span class="string">&#x27;top&#x27;</span>, <span class="string">&#x27;-1200px&#x27;</span>);</span><br><span class="line"> $(form).<span class="title function_">css</span>(<span class="string">&#x27;left&#x27;</span>, <span class="string">&#x27;-1200px&#x27;</span>);</span><br><span class="line"> $(form).<span class="title function_">appendTo</span>(<span class="string">&#x27;body&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>所以提交完后 原来上传的位置实际已经被newElement替代 但是如果在上传之前就指定了变量指向原input[type&#x3D;file] ，那么上传之后将依旧指向oldElement（其实已经在表单里）,此时trigger会生效，但是该元素实际已经被ajaxFileUpload所删除 ,只存在于内存中，change事件似乎不会生效了（此处原因不详，如果知晓请告诉我）</p>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><h3 id="1-（治标）将change事件写为内联onchange-quot-func-quot-形式"><a href="#1-（治标）将change事件写为内联onchange-quot-func-quot-形式" class="headerlink" title="1.（治标）将change事件写为内联onchange=&quot;func()&quot;形式"></a>1.（治标）将change事件写为内联<code>onchange=&quot;func()&quot;</code>形式</h3><h3 id="2-（治标）将change事件重新绑定"><a href="#2-（治标）将change事件重新绑定" class="headerlink" title="2.（治标）将change事件重新绑定"></a>2.（治标）将change事件重新绑定</h3><h3 id="3-（推荐-治本）将ajaxFileUpload内-oldElement-clone-添加true为参数后-将-fileInput-trigger-39-click-39-改为-39-id-39-trigger-39-click-39"><a href="#3-（推荐-治本）将ajaxFileUpload内-oldElement-clone-添加true为参数后-将-fileInput-trigger-39-click-39-改为-39-id-39-trigger-39-click-39" class="headerlink" title="3.（推荐 治本）将ajaxFileUpload内$(oldElement).clone()添加true为参数后 将$fileInput.trigger(&#39;click&#39;) 改为 $(&#39;#id&#39;).trigger(&#39;click&#39;)"></a>3.（推荐 治本）将ajaxFileUpload内<code>$(oldElement).clone()</code>添加true为参数后 将<code>$fileInput.trigger(&#39;click&#39;)</code> 改为 <code>$(&#39;#id&#39;).trigger(&#39;click&#39;)</code></h3><hr>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://syra-ti.icu/2017/08/10/%E4%B8%80%E4%B8%AAMui-Demo%E4%BB%93%E5%BA%93.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="白茶SyraTi">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/08/10/%E4%B8%80%E4%B8%AAMui-Demo%E4%BB%93%E5%BA%93.html" class="post-title-link" itemprop="url">一个Mui Demo仓库</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-08-10 14:03:13" itemprop="dateCreated datePublished" datetime="2017-08-10T14:03:13+08:00">2017-08-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-27 21:20:40" itemprop="dateModified" datetime="2022-01-27T21:20:40+08:00">2022-01-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>链接 <a target="_blank" rel="noopener" href="https://github.com/zhaomenghuan/mui-demo">https://github.com/zhaomenghuan/mui-demo</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://syra-ti.icu/2017/08/09/mui-slider%E8%BD%AE%E6%92%AD%E7%BB%84%E4%BB%B6%E5%B8%B8%E7%94%A8API.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="白茶SyraTi">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/08/09/mui-slider%E8%BD%AE%E6%92%AD%E7%BB%84%E4%BB%B6%E5%B8%B8%E7%94%A8API.html" class="post-title-link" itemprop="url">mui slider轮播组件常用API</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-08-09 11:41:12" itemprop="dateCreated datePublished" datetime="2017-08-09T11:41:12+08:00">2017-08-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-27 21:20:40" itemprop="dateModified" datetime="2022-01-27T21:20:40+08:00">2022-01-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>原文:<a target="_blank" rel="noopener" href="http://www.bcty365.com/content-146-5588-1.html">http://www.bcty365.com/content-146-5588-1.html</a></p>
<h2 id="组件介绍"><a href="#组件介绍" class="headerlink" title="组件介绍"></a>组件介绍</h2><p>轮播组件是mui提供的一个核心组件，在该核心组件基础上，衍生出了图片轮播、可拖动式图文表格、可拖动式选项卡、左右滑动9宫格等组件。</p>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>获取slide组件对象</p>
<pre><code>var slider = mui(&#39;#slider&#39;).slider();
</code></pre>
<h2 id="常用API"><a href="#常用API" class="headerlink" title="常用API"></a>常用API</h2><h3 id="gotoItem-index"><a href="#gotoItem-index" class="headerlink" title="gotoItem(index)"></a>gotoItem(index)</h3><p>切换到指定轮播</p>
<pre><code>slider.gotoItem(1); //切换至第二个轮播
</code></pre>
<h3 id="prevItem"><a href="#prevItem" class="headerlink" title="prevItem()"></a>prevItem()</h3><p>上一个轮播</p>
<pre><code>slider.prevItem();
</code></pre>
<h3 id="nextItem"><a href="#nextItem" class="headerlink" title="nextItem()"></a>nextItem()</h3><p>下一个轮播</p>
<pre><code>slider.nextItem();
</code></pre>
<h3 id="getSlideNumber"><a href="#getSlideNumber" class="headerlink" title="getSlideNumber()"></a>getSlideNumber()</h3><p>当前所处位置</p>
<pre><code>slider.getSlideNumber();
</code></pre>
<h3 id="stopped"><a href="#stopped" class="headerlink" title="stopped"></a>stopped</h3><p>禁用&#x2F;开启滑动切换</p>
<pre><code>slider.stopped = false; //开启滑动切换
slider.stopped = true; //关闭滑动切换
</code></pre>
<hr>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://syra-ti.icu/2017/07/29/input%E7%9A%84disabled%E5%B1%9E%E6%80%A7%E4%BC%9A%E5%AF%BC%E8%87%B4%E6%97%A0%E6%B3%95%E4%B8%8A%E4%BC%A0.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="白茶SyraTi">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/29/input%E7%9A%84disabled%E5%B1%9E%E6%80%A7%E4%BC%9A%E5%AF%BC%E8%87%B4%E6%97%A0%E6%B3%95%E4%B8%8A%E4%BC%A0.html" class="post-title-link" itemprop="url">input的disabled属性会导致无法上传</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-07-29 13:42:54" itemprop="dateCreated datePublished" datetime="2017-07-29T13:42:54+08:00">2017-07-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-27 21:20:40" itemprop="dateModified" datetime="2022-01-27T21:20:40+08:00">2022-01-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>如题 很多人会用<code>disable</code>禁止用户修改<code>input</code>的值<br>但是同时会导致<code>form</code>提交时不包含这个文本框的值<br>（<code>disabled</code>本意即为禁用 所以自然不会上传）</p>
<p><strong>需要实现禁止修改可以使用<code>readonly</code>属性</strong></p>
<hr>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://syra-ti.icu/2017/07/29/Property-prop-%E5%92%8CAttribute-attr-%E7%9A%84%E5%8C%BA%E5%88%AB.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="白茶SyraTi">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/29/Property-prop-%E5%92%8CAttribute-attr-%E7%9A%84%E5%8C%BA%E5%88%AB.html" class="post-title-link" itemprop="url">Property(prop)和Attribute(attr)的区别</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-07-29 13:31:10" itemprop="dateCreated datePublished" datetime="2017-07-29T13:31:10+08:00">2017-07-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-27 21:20:40" itemprop="dateModified" datetime="2022-01-27T21:20:40+08:00">2022-01-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="举例来讲"><a href="#举例来讲" class="headerlink" title="举例来讲"></a>举例来讲</h1><h3 id="我们现在有一个input-demo"><a href="#我们现在有一个input-demo" class="headerlink" title="我们现在有一个input#demo"></a>我们现在有一个input#demo</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;demo&quot;</span> <span class="attr">value</span>=<span class="string">&quot;attr&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="Attribute和Property都被翻译成“属性”"><a href="#Attribute和Property都被翻译成“属性”" class="headerlink" title="- Attribute和Property都被翻译成“属性”"></a>- Attribute和Property都被翻译成“属性”</h4><h4 id="“value”就是input-demo的属性之一"><a href="#“value”就是input-demo的属性之一" class="headerlink" title="- “value”就是input#demo的属性之一"></a>- “value”就是input#demo的属性之一</h4><h4 id="也就是说，没错，就像你想的一样"><a href="#也就是说，没错，就像你想的一样" class="headerlink" title="- 也就是说，没错，就像你想的一样"></a>- 也就是说，没错，就像你想的一样</h4><h4 id="input-demo的-Attribute-“value”值为”attr”"><a href="#input-demo的-Attribute-“value”值为”attr”" class="headerlink" title="- input#demo的 Attribute “value”值为”attr”"></a>- input#demo的 Attribute “value”值为”attr”</h4><h4 id="input-demo的-Property-“value”值同为”attr”"><a href="#input-demo的-Property-“value”值同为”attr”" class="headerlink" title="- input#demo的 Property “value”值同为”attr”"></a>- input#demo的 Property “value”值同为”attr”</h4><hr>
<h3 id="这时候你可能会问了-什么时候他们不一样？"><a href="#这时候你可能会问了-什么时候他们不一样？" class="headerlink" title="这时候你可能会问了:什么时候他们不一样？"></a>这时候你可能会问了:<strong>什么时候他们不一样？</strong></h3><hr>
<h4 id="wendehao！"><a href="#wendehao！" class="headerlink" title="wendehao！"></a><strong>wendehao！</strong></h4><blockquote>
<h4 id="当我们使用如下js代码对input-demo进行操作后"><a href="#当我们使用如下js代码对input-demo进行操作后" class="headerlink" title="当我们使用如下js代码对input#demo进行操作后"></a>当我们使用如下js代码对input#demo进行操作后</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="variable language_">document</span>.<span class="title function_">getElementbyId</span>(<span class="string">&#x27;demo&#x27;</span>).<span class="property">value</span>=<span class="string">&#x27;changed&#x27;</span>;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="此时打开你浏览器的F12（Chrome的Devtool，FireFox的Firebug等等）"><a href="#此时打开你浏览器的F12（Chrome的Devtool，FireFox的Firebug等等）" class="headerlink" title="此时打开你浏览器的F12（Chrome的Devtool，FireFox的Firebug等等）"></a>此时打开你浏览器的F12（Chrome的Devtool，FireFox的Firebug等等）</h4><blockquote>
<h4 id="你会发现"><a href="#你会发现" class="headerlink" title="你会发现:"></a>你会发现:</h4><h5 id="修改前是这样的"><a href="#修改前是这样的" class="headerlink" title="修改前是这样的"></a>修改前是这样的</h5><p><img src="https://img-blog.csdnimg.cn/img_convert/ba2166bd302da631d802b86d7fed8271.png" alt="这里写图片描述"></p>
<h5 id="修改后是这样的"><a href="#修改后是这样的" class="headerlink" title="修改后是这样的"></a>修改后是这样的</h5><p><img src="https://img-blog.csdnimg.cn/img_convert/ba2166bd302da631d802b86d7fed8271.png" alt="这里写图片描述"></p>
</blockquote>
<h2 id="你在逗我呢吧"><a href="#你在逗我呢吧" class="headerlink" title="??????????????你在逗我呢吧"></a>??????????????你在逗我呢吧</h2><h4 id="慌-不要慌-且看页面"><a href="#慌-不要慌-且看页面" class="headerlink" title="慌 不要慌 且看页面"></a>慌 不要慌 且看页面</h4><blockquote>
<h5 id="修改前是这样的-1"><a href="#修改前是这样的-1" class="headerlink" title="修改前是这样的"></a>修改前是这样的</h5><p><img src="https://img-blog.csdnimg.cn/img_convert/895b15a482e4505be7bd88820d54ba64.png" alt="这里写图片描述"></p>
<h5 id="修改后是这样的-1"><a href="#修改后是这样的-1" class="headerlink" title="修改后是这样的"></a>修改后是这样的</h5><p><img src="https://img-blog.csdnimg.cn/img_convert/ded827f92ef89f4609d4c29dc60d9748.png" alt="这里写图片描述"></p>
</blockquote>
<hr>
<h3 id="没错-聪明的你可能已经想到了"><a href="#没错-聪明的你可能已经想到了" class="headerlink" title="没错 聪明的你可能已经想到了"></a>没错 聪明的你可能已经想到了</h3><h3 id="value-39-changed-39-只修改了Attr与Prop之中的一个"><a href="#value-39-changed-39-只修改了Attr与Prop之中的一个" class="headerlink" title=".value = &#39;changed&#39;只修改了Attr与Prop之中的一个"></a><strong><code>.value = &#39;changed&#39;</code>只修改了Attr与Prop之中的一个</strong></h3><hr>
<h2 id="value方法修改的是input-demo的Property"><a href="#value方法修改的是input-demo的Property" class="headerlink" title=".value方法修改的是input#demo的Property"></a><code>.value</code>方法修改的是input#demo的Property</h2><blockquote>
<h4 id="而当我们使用如下js代码时"><a href="#而当我们使用如下js代码时" class="headerlink" title="而当我们使用如下js代码时"></a>而当我们使用如下js代码时</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="variable language_">document</span>.<span class="title function_">getElementbyId</span>(<span class="string">&#x27;demo&#x27;</span>).<span class="title function_">setAttribute</span>(<span class="string">&#x27;value&#x27;</span>,<span class="string">&#x27;changed&#x27;</span>);</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="此时你会发现更诡异的事情是"><a href="#此时你会发现更诡异的事情是" class="headerlink" title="此时你会发现更诡异的事情是"></a>此时你会发现更诡异的事情是</h3><blockquote>
<h4 id="页面的值并没有发生改变"><a href="#页面的值并没有发生改变" class="headerlink" title="页面的值并没有发生改变"></a>页面的值并没有发生改变</h4><p><img src="https://img-blog.csdnimg.cn/img_convert/895b15a482e4505be7bd88820d54ba64.png" alt="这里写图片描述"></p>
<h4 id="但是打开你的F12，你会发现value值发生了变化"><a href="#但是打开你的F12，你会发现value值发生了变化" class="headerlink" title="但是打开你的F12，你会发现value值发生了变化"></a>但是打开你的F12，你会发现value值发生了变化</h4><p><img src="https://img-blog.csdnimg.cn/img_convert/24be7dcca9b2cae9ebdb3be7cab210b5.png" alt="这里写图片描述"></p>
</blockquote>
<h3 id="得出结论"><a href="#得出结论" class="headerlink" title="得出结论"></a>得出结论</h3><h2 id="setAttribute-方法修改的是input-demo的Attribute"><a href="#setAttribute-方法修改的是input-demo的Attribute" class="headerlink" title=".setAttribute()方法修改的是input#demo的Attribute"></a><code>.setAttribute()</code>方法修改的是input#demo的Attribute</h2><hr>
<p>在这里引用一段 -T大大- 博客里的文字来更好的阐述这两者的区别</p>
<p>原文链接：<a target="_blank" rel="noopener" href="http://blog.csdn.net/wangji5850/article/details/50925042">http://blog.csdn.net/wangji5850/article/details/50925042</a> &#x2F;&#x2F;图片请前往原文查看</p>
<blockquote>
<p>此问题归根结底是由于DOM的property和attribute的区别：</p>
</blockquote>
<blockquote>
<h3 id="attribute"><a href="#attribute" class="headerlink" title="attribute"></a>attribute</h3><p>input节点有很多属性(attribute)：‘type’,’id’,’value’,’class’以及自定义属性，在DOM中有setAttribute()和getAttribute()读写DOM树节点的属性(attribute)</p>
<p>PS:在这里的getAttribute方法有一个潜规则，部分属性（input的value和checked）通过getAttribut取到的是初始值，这个就很好的解释了图2结果为什么为2。</p>
<h3 id="property"><a href="#property" class="headerlink" title="property"></a>property</h3><p>JavaScript获取到的DOM节点对象，比如input<br>你可以将他看作为一个基本的js对象，这个对象包括很多属性(property)，比如“value”，“className”以及一些方法，setAttribute,getAttribute,onclick等，值得注意的是对象的value的属性(property)取值是跟着输入框内的当前值一起更新的，这解释了图1中7为什么为200了。<br>所有在日常的工作中，推荐是使用 property,这样事情处理起来比较简单一些，attribute永远是字符串。。</p>
</blockquote>
<hr>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://syra-ti.icu/2017/07/28/JS%E5%AE%9E%E7%8E%B0%E7%82%B9%E5%87%BB%E6%8C%89%E9%92%AE%EF%BC%8C%E5%A4%8D%E5%88%B6%E6%96%87%E6%9C%AC%E6%A1%86%E4%B8%AD%E7%9A%84%E7%9A%84%E5%86%85%E5%AE%B9.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="白茶SyraTi">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | SyraTi.ICU">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2017/07/28/JS%E5%AE%9E%E7%8E%B0%E7%82%B9%E5%87%BB%E6%8C%89%E9%92%AE%EF%BC%8C%E5%A4%8D%E5%88%B6%E6%96%87%E6%9C%AC%E6%A1%86%E4%B8%AD%E7%9A%84%E7%9A%84%E5%86%85%E5%AE%B9.html" class="post-title-link" itemprop="url">JS实现点击按钮，复制文本框中的的内容</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2017-07-28 09:04:03" itemprop="dateCreated datePublished" datetime="2017-07-28T09:04:03+08:00">2017-07-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-01-27 21:20:40" itemprop="dateModified" datetime="2022-01-27T21:20:40+08:00">2022-01-27</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="Html"><a href="#Html" class="headerlink" title="Html"></a>Html</h3><hr>
<pre><code>&lt;textarea cols=&quot;20&quot; rows=&quot;10&quot; id=&quot;anyInput&quot;&gt;用户定义的代码区域&lt;/textarea&gt;
&lt;button type=&quot;button&quot; onClick=&quot;copy()&quot; value=&quot;点击复制代码&quot; /&gt;
</code></pre>
<h3 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h3><hr>
<pre><code>function copyUrl2()
&#123;
    var target=document.getElementById(&quot;anyInput&quot;);
    target.select(); // 选择文本
    document.execCommand(&quot;Copy&quot;); // 执行浏览器复制命令
    alert(&quot;已复制好，可贴粘。&quot;);
&#125;
</code></pre>
<hr>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">白茶SyraTi</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
